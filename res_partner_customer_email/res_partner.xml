<?xml version="1.0" ?>
<openerp>
    <data noupdate="1">
        <!-- New Customer Email Template -->
        <record id="new_customer_template" model="email.template">
            <field name="name">New customer email</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="subject">Welcome to ${object.company_id.name or ""}</field>
            <field name="email_from">${object.company_id.email or ""}</field>
            <field name="email_to">${object.email}</field>
            <field name="body_html">
Hello ${object.name}

Welcome to ${object.company_id.name or ""}

                </field>
        </record>

        <!-- Add a server action to trigger email -->
        <record id="action_new_customer_email" model="ir.actions.server">
            <field name="name">Email new customer</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="sequence">5</field>
            <field name="condition">False</field>
            <field name="type">ir.actions.server</field>
            <field name="state">code</field>
            <field name="code">
data_pool = self.pool.get('ir.model.data')
ids = data_pool.search(cr, uid, [('model', '=', 'email.template'), ('name', '=', 'new_customer_template')])
pool.get('email.template').send_mail(cr, uid, data_pool.browse(cr, uid, ids)[0].res_id, context['active_id'], context=context)
            </field>
        </record>
    </data>
</openerp>
