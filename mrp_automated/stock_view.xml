<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        #
        # Add new production lot button
        #
        <!-- Receive Products - Tree -->
        <record id="view_move_tree_reception_picking_prodlot" model="ir.ui.view">
            <field name="name">stock.move.tree2</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="priority" eval="6" />
            <field name="arch" type="xml">
                <tree colors="grey:state in ('cancel')" string="Moves">
                    <field name="picking_id" string="Reference"/>
                    <field name="origin"/>
                    <field name="partner_id" string="Partner"/>
                    <field name="product_id"/>
                    <field name="product_qty" />
                    <field name="product_uom" string="UoM"/>
                    <button name="%(stock.move_scrap)d"
                        string="Scrap Products" type="action"
                        icon="gtk-convert" context="{'scrap': True}"
                        states="draft,waiting,confirmed,assigned" groups="base.group_extended"/>
                    <field name="prodlot_id" groups="base.group_extended"/>
                    <button name="new_prod_lot" groups="base.group_extended"
                        string="New" type="object"
                        icon="terp-document-new"
                        states="draft,waiting,confirmed,assigned"
                        colspan="1"
                        context="{'prodlot_name':False}"/>
                    <button name="%(stock.track_line)d" string="Split in production lots" type="action"
                        icon="terp-stock_effects-object-colorize" attrs="{'invisible': [('prodlot_id','&lt;&gt;',False)]}"
                       states="draft,waiting,confirmed,assigned,done"
                        context="{'default_use_exist': picking_id.type=='in'}"
                        groups="base.group_extended"/>
                    <field name="tracking_id" groups="base.group_extended"/>
                    <button name="stock.setlast_tracking" string="Put in current pack" type="object"
                        attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
                        groups="base.group_extended"
                        icon="terp-stock_effects-object-colorize"
                        states="draft,assigned,confirmed,done"/>
                    <button name="%(stock.split_into)d" string="Put in a new pack" type="action"
                        groups="base.group_extended"
                        icon="terp-stock_effects-object-colorize"
                        states="draft,assigned,confirmed,done"/>
                    <field name="date"/>
                    <field name="state"/>
                    <button name="stock.action_assign" states="confirmed" string="Set Available" type="object" icon="gtk-yes"/>
                    <button name="%(stock.action_partial_move_server)d" string="Process" type="action" states="confirmed,assigned" icon="gtk-go-forward"/>
                </tree>
            </field>
        </record>
        <!-- Receive Products - Form -->
        <record id="view_move_form_reception_picking_prodlot" model="ir.ui.view">
            <field name="name">stock.move.form2</field>
            <field name="model">stock.move</field>
            <field name="type">form</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <form string="Receive Products">
                    <group colspan="4" col="7">
                        <field name="product_id" on_change="stock.onchange_product_id(product_id,location_id,location_dest_id, False)"/>
                        <field name="product_qty" on_change="stock.onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                        <field name="product_uom" string="Unit Of Measure"/>
                        <button name="%(stock.move_scrap)d" groups="base.group_extended"
                                string="Scrap" type="action"
                                icon="gtk-convert" context="{'scrap': True}"
                                states="draft,waiting,confirmed,assigned" colspan="1"/>
                        <newline/>
                        <field name="location_id" context="{'full':True}"/>
                        <field name="location_dest_id" context="{'full':True}"/>
                        <field name="address_id" context="{'contact_display':'partner'}"/>

                    </group>
                    <group colspan="2" col="2">
                        <separator colspan="2" string="Move Information"/>
                        <field name="name" string="Reason"/>
                        <field name="product_uos_qty" groups="product.group_uos"  on_change="stock.onchange_uos_quantity(product_id, product_uos_qty, product_uos, product_uom)" colspan="4"/>
                        <field name="product_uos" groups="product.group_uos" colspan="4"/>
                    </group>

                    <group colspan="2" col="2">
                        <separator string="Picking" colspan="2" />
                        <field name="picking_id"/>
                        <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    </group>

                    <group colspan="2" col="2">
                        <separator string="Dates" colspan="2" />
                        <field name="create_date" groups="base.group_extended"/>
                        <field name="date" groups="base.group_extended"/>
                        <field name="date_expected"/>
                    </group>

                    <group colspan="2" col="4" groups="base.group_extended">
                        <separator string="Traceability" colspan="4" groups="base.group_extended"/>
                        <field name="tracking_id" colspan="3" groups="base.group_extended"/>
                        <button name="%(stock.split_into)d" string="New pack" type="action"
                              groups="base.group_extended"
                              icon="terp-stock_effects-object-colorize"
                              states="draft,assigned,confirmed,done" colspan="1"/>
                        <field name="prodlot_id" groups="base.group_extended"
                            context="{'location_id':location_id, 'product_id':product_id}"
                            domain="[('product_id','=?',product_id)]"
                            on_change="stock.onchange_lot_id(prodlot_id,product_qty, location_id, product_id, product_uom)" colspan="3"/>
                        <button name="new_prod_lot" groups="base.group_extended"
                            string="New" type="object"
                            icon="terp-document-new"
                            states="draft,waiting,confirmed,assigned"
                            colspan="1"
                            context="{'prodlot_name':False}"/>
                            
                        <button name="%(stock.track_line)d"
                            groups="base.group_extended"
                            states="draft,waiting,confirmed,assigned,done"
                            string="Split" type="action" icon="terp-stock_effects-object-colorize" colspan="1"/>
                    </group>

                    <separator colspan="4"/>
                    <field name="state"/>
                    <group col="5" colspan="2">
                        <button name="action_cancel" states="assigned,confirmed" string="_Cancel" type="object" icon="gtk-cancel"/>
                        <button name="action_confirm" states="draft" string="Process Later" type="object" icon="gtk-apply"/>
                        <button name="force_assign" states="confirmed" string="Set Available" type="object" icon="gtk-yes"/>
                        <button name="%(stock.action_partial_move_server)d" string="Process" type="action" states="assigned" icon="gtk-go-forward"/>
                    </group>
                </form>
            </field>
        </record>
        <!-- Receive Products - Actions -->
        <record id="action_reception_picking_move_prodlot" model="ir.actions.act_window">
            <field name="name">Receive Products</field>
            <field name="res_model">stock.move</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">['|','&amp;',('picking_id','=',False),('location_id.usage', 'in', ['customer','supplier']),'&amp;',('picking_id','!=',False),('picking_id.type','=','in')]</field>
            <field name="view_id" ref="view_move_tree_reception_picking_prodlot"/>
            <field name="context" eval="'{\'search_default_receive\':1, \'product_receive\' : True, \'default_location_id\':%d, \'default_location_dest_id\':%d}' % (ref('stock.stock_location_suppliers'),ref('stock.stock_location_stock') )"/>
            <field name="search_view_id" ref="stock.view_move_search_reception_incoming_picking"/>
            <field name="help">Here you can receive individual products, no matter what purchase order or picking order they come from. You will find the list of all products you are waiting for. Once you receive an order, you can filter based on the name of the supplier or the purchase order reference. Then you can confirm all products received using the buttons on the right of each line.</field>
        </record>
        <record model="ir.actions.act_window.view" id="action_move_reception_picking_form">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_move_form_reception_picking_prodlot"/>
            <field name="act_window_id" ref="action_reception_picking_move_prodlot"/>
        </record>
        <record model="ir.actions.act_window.view" id="action_move_reception_picking_tree">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_move_tree_reception_picking_prodlot"/>
            <field name="act_window_id" ref="action_reception_picking_move_prodlot"/>
        </record>
        <!-- Receive Products - Menu -->
        <delete model="ir.ui.menu" id="stock.menu_action_pdct_in"/>
        <menuitem action="action_reception_picking_move_prodlot" name="Receive Products" id="menu_action_pdct_in_prodlot" parent="stock.menu_stock_products_moves" icon="STOCK_JUSTIFY_FILL" sequence="1"/>
        <!-- Incoming Shipment - Form -->
        <record id="view_picking_in_form_prodlot" model="ir.ui.view">
            <field name="name">stock.picking.in.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Input Picking List">
                    <group colspan="4" col="6">
                        <group colspan="4" col="4">
                            <field name="name" readonly="1"/>
                            <field name="origin"/>
                            <field name="address_id" on_change="onchange_partner_in(address_id)" context="{'contact_display':'partner'}" colspan="4"/>
                            <field name="invoice_state" string="Invoice Control"/>
                            <field name="backorder_id" readonly="1" groups="base.group_extended"/>
                        </group>
                        <group colspan="2" col="2">
                            <field name="date"/>
                            <field name="min_date" readonly="1"/>
                            <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                        </group>
                    </group>
                    <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_in_id': address_id}" >
                                <tree colors="grey:scrapped==True" string="Stock Moves">
                                    <field name="product_id" />
                                    <field name="product_qty" />
                                    <field name="product_uom" string="UoM" />
                                    <button name="%(stock.move_scrap)d"
                                        string="Scrap Products" type="action"
                                        icon="gtk-convert" context="{'scrap': True}"
                                        states="draft,waiting,confirmed,assigned"
                                        groups="base.group_extended"/>
                                    <field name="scrapped" invisible="1"/>
                                    <field name="prodlot_id" groups="base.group_extended"/>
                                    <button name="check_prodlot_field"
                                           string="New Production Lot"
                                           groups="base.group_extended"
                                           type="object" icon="terp-document-new"
                                           states="draft,waiting,confirmed,assigned" />
                                    <button name="%(stock.track_line)d"
                                           string="Split in production lots"
                                           groups="base.group_extended"
                                           type="action" icon="terp-stock_effects-object-colorize"
                                           states="draft,waiting,confirmed,assigned" />
                                    <field name="tracking_id" groups="base.group_extended"/>
                                    <button name="stock.setlast_tracking" string="Put in current pack" type="object"
                                        groups="base.group_extended"
                                        icon="terp-stock_effects-object-colorize" attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
                                        states="draft,assigned,confirmed"/>
                                    <button name="%(stock.split_into)d" string="Put in a new pack" type="action"
                                        groups="base.group_extended"
                                        icon="terp-stock_effects-object-colorize"
                                        states="draft,assigned,confirmed"/>
                                    <field name="location_dest_id"/>
                                    <field name="state"/>
                                </tree>
                                <form string="Stock Moves">
                                    <group colspan="2" col="4">
                                        <separator colspan="4" string="Move Information"/>
                                        <field name="name" invisible="1" colspan="4"/>
                                        <field name="product_id" on_change="onchange_product_id(product_id,location_id,location_dest_id, parent.address_id)" colspan="4"/>
                                        <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)" colspan="3"/>
                                        <button name="%(stock.move_scrap)d"
                                                string="Scrap" type="action" groups="base.group_extended"
                                                icon="gtk-convert" context="{'scrap': True}"
                                                states="draft,waiting,confirmed,assigned" colspan="1"/>
                                        <field name="product_uom" string="Unit Of Measure" colspan="4"/>
                                        <field name="product_uos_qty" groups="product.group_uos" on_change="onchange_uos_quantity(product_id, product_uos_qty, product_uos, product_uom)" colspan="4"/>
                                        <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)" colspan="4"/>
                                        <field groups="base.group_extended" name="product_packaging"  domain="[('product_id','=',product_id)]" colspan="4"/>
                                    </group>

                                    <group colspan="2" col="2">
                                        <separator string="Locations" colspan="2" />
                                        <field name="location_id" domain="[('usage','&lt;&gt;','view')]" />
                                        <field name="location_dest_id" domain="[('usage','=','internal')]" />
                                    </group>

                                    <group colspan="2" col="2">
                                        <separator string="Dates" colspan="2" />
                                        <field name="create_date" invisible="1"/>
                                        <field name="date"/>
                                        <field name="date_expected"/>
                                    </group>

                                    <group colspan="2" col="4" groups="base.group_extended">
                                        <separator string="Traceability" colspan="4" groups="base.group_extended"/>
                                        <field name="tracking_id" groups="base.group_extended" colspan="3" />
                                        <button name="%(stock.split_into)d" string="New pack" type="action"
                                              groups="base.group_extended"
                                              icon="terp-stock_effects-object-colorize"
                                              states="draft,assigned,confirmed" colspan="1"/>
                                        <field name="prodlot_id" groups="base.group_extended"
                                            context="{'location_id':location_id, 'product_id':product_id}"
                                            domain="[('product_id','=?',product_id)]"
                                            on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id, product_uom)" colspan="3"/>
                                        <button name="%(stock.track_line)d"
                                              groups="base.group_extended"
                                              states="draft,waiting,confirmed,assigned"
                                              string="Split" type="action" icon="terp-stock_effects-object-colorize" colspan="1" />
                                    </group>
                                    <label string="" colspan="4"/>
                                    <field name="state"/>
                                    <group col="4" colspan="2">
                                        <button name="action_cancel" states="assigned" string="_Cancel" type="object" icon="gtk-cancel"/>
                                        <button name="action_confirm" states="draft" string="Confirm" type="object" icon="gtk-apply"/>
                                        <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                        <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object" icon="gtk-find"/>
                                    </group>
                                </form>
                            </field>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="button_cancel" states="assigned,confirmed,draft" string="_Cancel" icon="gtk-cancel"/>
                                <button name="draft_force_assign" states="draft" string="Process Later" type="object" icon="gtk-ok"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object" icon="gtk-media-play"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object" icon="gtk-find"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" groups="base.group_extended" icon="gtk-jump-to"/>
                                <button name="action_process" states="assigned" string="Process" type="object" icon="gtk-go-forward"/>
                                <group colspan="1" states="done">
                                    <button name="%(stock.act_stock_return_picking)d" string="Return Products" states="done" type="action" icon="gtk-execute"/>
                                </group>
                                    <button states="done" name="%(stock.action_stock_invoice_onshipping)d" string="Create Invoice" attrs="{'invisible': ['|','|',('state','&lt;&gt;','done'),('invoice_state','=','invoiced'),('invoice_state','=','none')]}" type="action" icon="terp-gtk-go-back-rtl" />
                            </group>
                        </page>
                        <page string="Additional Info" groups="base.group_extended,base.group_multi_company">
                            <field name="type" groups="base.group_extended"/>
                            <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>
        <!-- Incoming Shipment - Actions -->
        <record id="action_picking_tree4_prodlot" model="ir.actions.act_window">
            <field name="name">Incoming Shipments</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','in')]</field>
            <field name="context">{'contact_display': 'partner_address',"search_default_available":1}</field>
            <field name="search_view_id" ref="stock.view_picking_in_search"/>
            <field name="help">The Incoming Shipments is the list of all orders you will receive from your supplier. An incoming shipment contains a list of products to be received according to the original purchase order. You can validate the shipment totally or partially.</field>
        </record>
        <record id="action_invoice_tree5_view1_prodlot" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="stock.view_picking_in_tree"/>
            <field name="act_window_id" ref="action_picking_tree4_prodlot"/>
        </record>
        <record id="action_invoice_tree5_view2_prodlot" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_in_form_prodlot"/>
            <field name="act_window_id" ref="action_picking_tree4_prodlot"/>
        </record>
        <record id="action_invoice_tree5_view2_cal_prodlot" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree4_prodlot"/>
        </record>
        <!-- Incoming Shipment - Menu -->
        <delete model="ir.ui.menu" id="stock.menu_action_picking_tree4"/>
        <menuitem action="action_picking_tree4_prodlot" name="Incoming Shipments" id="menu_action_picking_tree4_prodlot" parent="stock.menu_stock_warehouse_mgmt" icon="STOCK_JUSTIFY_FILL" sequence="1"/>
        #
        # Add FIFO (First In, First Out) button
        #
        <!-- Deliver Products - Tree -->
        <record id="view_move_tree_reception_picking_fifo" model="ir.ui.view">
            <field name="name">stock.move.tree2</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="priority" eval="6" />
            <field name="arch" type="xml">
                <tree colors="grey:state in ('cancel')" string="Moves">
                    <field name="picking_id" string="Reference"/>
                    <field name="origin"/>
                    <field name="partner_id" string="Partner"/>
                    <field name="product_id"/>
                    <field name="product_qty" />
                    <field name="product_uom" string="UoM"/>
                    <button name="%(stock.move_scrap)d"
                        string="Scrap Products" type="action"
                        icon="gtk-convert" context="{'scrap': True}"
                        states="draft,waiting,confirmed,assigned" groups="base.group_extended"/>
                    <field name="prodlot_id" groups="base.group_extended"/>
                    <button name="fifo" groups="base.group_extended"
                            string="FIFO" type="object"
                            icon="terp-stock_effects-object-colorize"
                            states="draft,waiting,confirmed,assigned"
                            colspan="1"/>
                    <button name="%(stock.track_line)d" string="Split in production lots" type="action"
                        icon="terp-stock_effects-object-colorize" attrs="{'invisible': [('prodlot_id','&lt;&gt;',False)]}"
                       states="draft,waiting,confirmed,assigned,done"
                        context="{'default_use_exist': picking_id.type=='in'}"
                        groups="base.group_extended"/>
                    <field name="tracking_id" groups="base.group_extended"/>
                    <button name="stock.setlast_tracking" string="Put in current pack" type="object"
                        attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
                        groups="base.group_extended"
                        icon="terp-stock_effects-object-colorize"
                        states="draft,assigned,confirmed,done"/>
                    <button name="%(stock.split_into)d" string="Put in a new pack" type="action"
                        groups="base.group_extended"
                        icon="terp-stock_effects-object-colorize"
                        states="draft,assigned,confirmed,done"/>
                    <field name="date"/>
                    <field name="state"/>
                    <button name="stock.action_assign" states="confirmed" string="Set Available" type="object" icon="gtk-yes"/>
                    <button name="%(stock.action_partial_move_server)d" string="Process" type="action" states="confirmed,assigned" icon="gtk-go-forward"/>
                </tree>
            </field>
        </record>
        <!-- Deliver Products - Form -->
        <record id="view_move_form_reception_picking_fifo" model="ir.ui.view">
            <field name="name">stock.move.form</field>
            <field name="model">stock.move</field>
            <field name="type">form</field>
            <field eval="4" name="priority"/>
            <field name="arch" type="xml">
                <form string="Stock Moves">
                    <group colspan="4" col="7">
                        <field name="product_id" on_change="onchange_product_id(product_id,location_id,location_dest_id, False)"/>
                        <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                        <field name="product_uom" string="Unit Of Measure"/>
                        <button name="%(stock.move_scrap)d" groups="base.group_extended"
                                string="Scrap" type="action"
                                icon="gtk-convert" context="{'scrap': True}"
                                states="draft,waiting,confirmed,assigned" colspan="1"/>
                        <newline/>
                        <field name="location_id" context="{'full':True}"/>
                        <field name="location_dest_id" context="{'full':True}"/>
                        <field name="address_id" context="{'contact_display':'partner'}"/>

                    </group>
                    <group colspan="2" col="2">
                        <separator colspan="2" string="Move Information"/>
                        <field name="name" string="Reason"/>
                        <field name="product_uos_qty" groups="product.group_uos" on_change="onchange_uos_quantity(product_id, product_uos_qty, product_uos, product_uom)" colspan="4"/>
                        <field name="product_uos" groups="product.group_uos" colspan="4"/>
                    </group>
                    <group colspan="2" col="2" groups="base.group_extended">
                        <separator string="Weights" colspan="2"/>
                        <field name="weight"/>
                        <field name="weight_net"/>
                    </group>
                    <group colspan="2" col="2">
                        <separator string="Picking" colspan="2" />
                        <field name="picking_id"/>
                        <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    </group>

                    <group colspan="2" col="2">
                        <separator string="Dates" colspan="2" />
                        <field name="create_date" groups="base.group_extended"/>
                        <field name="date" groups="base.group_extended"/>
                        <field name="date_expected"/>
                        <field name="date_backdating" on_change="on_change_date_backdating(date_backdating)" />
                    </group>

                    <group colspan="2" col="4" groups="base.group_extended">
                        <separator string="Traceability" colspan="4" groups="base.group_extended"/>
                        <field name="purchase_line_id" colspan="2" />
                        <field name="sale_line_id" colspan="2"/>
                        <field name="tracking_id" colspan="3" groups="base.group_extended"/>
                        <button name="%(stock.split_into)d" string="New pack" type="action"
                              groups="base.group_extended"
                              icon="terp-stock_effects-object-colorize"
                              states="draft,assigned,confirmed" colspan="1"/>
                        <field name="prodlot_id" groups="base.group_extended"
                            context="{'location_id':location_id, 'product_id':product_id}"
                            domain="[('product_id','=?',product_id)]"
                            on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id, product_uom)" colspan="3"/>
                        <button name="fifo" groups="base.group_extended"
                            string="FIFO" type="object"
                            icon="terp-stock_effects-object-colorize"
                            states="draft,waiting,confirmed,assigned"
                            colspan="1"/>
                        <button name="%(stock.track_line)d"
                              groups="base.group_extended"
                              states="draft,waiting,confirmed,assigned"
                              string="Split" type="action" icon="terp-stock_effects-object-colorize" colspan="1"/>
                    </group>

                    <group colspan="2" col="4">
                        <separator string="Notes" colspan="4" />
                        <field name="notes" />
                        <field name="prtnotes" />
                    </group>
                    <group colspan="2" col="4" groups="base.group_extended">
                        <separator string="Cost Price (at creation)" colspan="4" groups="base.group_extended" />
                        <field name="history_price_unit" nolabel="1" readonly="1" />
                        <field name="history_price_unit_currency_id" nolabel="1" readonly="1" colspan="2" />
                    </group>
                    <separator colspan="4"/>
                    <field name="state"/>
                    <group col="4" colspan="2">
                        <button name="action_cancel" states="assigned,confirmed" string="_Cancel" type="object" icon="gtk-cancel"/>
                        <button name="action_confirm" states="draft" string="Process Later" type="object" icon="gtk-apply"/>
                        <button name="force_assign" states="confirmed" string="Set Available" type="object" icon="gtk-yes"/>
                        <button name="action_done" states="draft,assigned,confirmed" string="Process Now" type="object" icon="gtk-jump-to"/>
                    </group>
                </form>
            </field>
        </record>
        <!-- Deliver Products - Actions -->
        <record id="action_out_picking_move_fifo" model="ir.actions.act_window">
            <field name="name">Deliver Products</field>
            <field name="res_model">stock.move</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">['|','&amp;',('picking_id','=',False),('location_dest_id.usage', 'in', ['customer','supplier']),'&amp;',('picking_id','!=',False),('picking_id.type','=','out')]</field>
            <field name="view_id" ref="view_move_tree_reception_picking_fifo"/>
            <field name="context" eval="'{\'search_default_receive\':1, \'default_location_id\':%d, \'default_location_dest_id\':%d}' % (ref('stock.stock_location_stock'),ref('stock.stock_location_customers'))"/>
            <field name="search_view_id" ref="stock.view_move_search_reception_outcoming_picking"/>
            <field name="help">You will find in this list all products you have to deliver to your customers. You can process the deliveries directly from this list using the buttons on the right of each line. You can filter the products to deliver by customer, products or sale order (using the Origin field).</field>
        </record>
        <record model="ir.actions.act_window.view" id="action_move_out_picking_tree_fifo">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_move_tree_reception_picking_fifo"/>
            <field name="act_window_id" ref="action_out_picking_move_fifo"/>
        </record>
        <record model="ir.actions.act_window.view" id="action_move_out_picking_form_fifo">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_move_form_reception_picking_fifo"/>
            <field name="act_window_id" ref="action_out_picking_move_fifo"/>
        </record>
        <!-- Deliver Products - Menu -->
        <delete model="ir.ui.menu" id="stock.menu_action_pdct_out"/>
        <menuitem action="action_out_picking_move_fifo" name="Deliver Products" id="menu_action_pdct_out_fifo" parent="stock.menu_stock_products_moves" icon="STOCK_JUSTIFY_FILL" sequence="2"/>
    </data>
</openerp>
